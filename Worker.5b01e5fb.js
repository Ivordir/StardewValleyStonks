(()=>{var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},i=t.parcelRequire94c2;function r(t){return Array.isArray(t)||ArrayBuffer.isView(t)}null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in n){var i=n[t];delete n[t];var r={id:t,exports:{}};return e[t]=r,i.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){n[t]=e},t.parcelRequire94c2=i),i.register("e7E5d",(function(t,e){t.exports=i("l9uIb")})),i.register("l9uIb",(function(t,e){(function(){var e,n,i,r,o,a,l,s,u,p,c,f,h,d,b,w;i=Math.floor,p=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},u=function(t,e,r,o,a){var l;if(null==r&&(r=0),null==a&&(a=n),r<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);r<o;)a(e,t[l=i((r+o)/2)])<0?o=l:r=l+1;return[].splice.apply(t,[r,r-r].concat(e)),e},a=function(t,e,i){return null==i&&(i=n),t.push(e),d(t,0,t.length-1,i)},o=function(t,e){var i,r;return null==e&&(e=n),i=t.pop(),t.length?(r=t[0],t[0]=i,b(t,0,e)):r=i,r},s=function(t,e,i){var r;return null==i&&(i=n),r=t[0],t[0]=e,b(t,0,i),r},l=function(t,e,i){var r;return null==i&&(i=n),t.length&&i(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],b(t,0,i)),e},r=function(t,e){var r,o,a,l,s,u;for(null==e&&(e=n),l=function(){u=[];for(var e=0,n=i(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}.apply(this).reverse(),s=[],o=0,a=l.length;o<a;o++)r=l[o],s.push(b(t,r,e));return s},h=function(t,e,i){var r;if(null==i&&(i=n),-1!==(r=t.indexOf(e)))return d(t,0,r,i),b(t,r,i)},c=function(t,e,i){var o,a,s,u,p;if(null==i&&(i=n),!(a=t.slice(0,e)).length)return a;for(r(a,i),s=0,u=(p=t.slice(e)).length;s<u;s++)o=p[s],l(a,o,i);return a.sort(i).reverse()},f=function(t,e,i){var a,l,s,c,f,h,d,b,w;if(null==i&&(i=n),10*e<=t.length){if(!(s=t.slice(0,e).sort(i)).length)return s;for(l=s[s.length-1],c=0,h=(d=t.slice(e)).length;c<h;c++)i(a=d[c],l)<0&&(u(s,a,0,null,i),s.pop(),l=s[s.length-1]);return s}for(r(t,i),w=[],f=0,b=p(e,t.length);0<=b?f<b:f>b;0<=b?++f:--f)w.push(o(t,i));return w},d=function(t,e,i,r){var o,a,l;for(null==r&&(r=n),o=t[i];i>e&&r(o,a=t[l=i-1>>1])<0;)t[i]=a,i=l;return t[i]=o},b=function(t,e,i){var r,o,a,l,s;for(null==i&&(i=n),o=t.length,s=e,a=t[e],r=2*e+1;r<o;)(l=r+1)<o&&!(i(t[r],t[l])<0)&&(r=l),t[e]=t[r],r=2*(e=r)+1;return t[e]=a,d(t,s,e,i)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=s,t.pushpop=l,t.heapify=r,t.updateItem=h,t.nlargest=c,t.nsmallest=f,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return l(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return r(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return h(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),w=function(){return e},"function"==typeof define&&define.amd?define([],w):t.exports=w()}).call(t.exports)}));class o{static id(t){return o.idMap.has(t)||o.idMap.set(t,++o.count),o.idMap.get(t)}}o.idMap=new WeakMap,o.count=0;Symbol("curried");function a(t,e){return"function"==typeof t?new t(e):new Array(e)}function l(t,e,n){const i=0|e.length,r=a(n,i);for(let n=0;n<=i-1;n++)r[n]=t(e[n]);return r}var s={},u=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0}),s.solve=s.defaultOptions=s.backupDefaultOptions=s.tableauModel=s.update=s.index=s.inRange=s.equalTo=s.greaterEq=s.lessEq=void 0;const p=u(i("e7E5d"));s.lessEq=t=>({max:t});s.greaterEq=t=>({min:t});s.equalTo=t=>({equal:t});s.inRange=(t,e)=>({max:e,min:t});s.index=(t,e,n)=>t.matrix[e*t.width+n];s.update=(t,e,n,i)=>{t.matrix[e*t.width+n]=i};const c=(t,e)=>{if(null==e)throw`${t} was null or undefined.`;if("function"==typeof e[Symbol.iterator])return e;if("object"==typeof e)return Object.entries(e);throw`${t} was not an object or iterable.`},f=t=>!0===t||(!1===t?new Set:t instanceof Set?t:new Set(t));s.tableauModel=t=>{if(null==t.variables)throw"variables was null or undefined.";if(null==t.constraints)throw"constraints was null or undefined.";const e="maximize"===t.direction||null==t.direction?1:"minimize"===t.direction?-1:0;if(0===e)throw`'${t.direction}' is not a valid optimization direction. Should be 'maximize', 'minimize', or left blank.`;const n=Array.isArray(t.variables)?t.variables:"function"==typeof t.variables[Symbol.iterator]?Array.from(t.variables):"object"==typeof t.variables?Object.entries(t.variables):null;if(null===n)throw"variables was not an object or iterable.";const i=[],r=[];if(t.integers||t.binaries){const e=f(t.binaries),o=!0===e||f(t.integers);for(let t=1;t<=n.length;t++){const[a]=n[t-1];!0===e||e.has(a)?(i.push(t),r.push(t)):(!0===o||o.has(a))&&r.push(t)}}const o=new Map;for(const[e,n]of c("constraints",t.constraints)){if(null==n)throw"A constraint was null or undefined.";const t=o.get(e)??{row:NaN,lower:-1/0,upper:1/0};t.lower=Math.max(t.lower,n.equal??n.min??-1/0),t.upper=Math.min(t.upper,n.equal??n.max??1/0),o.has(e)||o.set(e,t)}let a=1;for(const t of o.values())t.row=a,a+=(Number.isFinite(t.lower)?1:0)+(Number.isFinite(t.upper)?1:0);const l=n.length+1,u=a+i.length,p=l+u,h={matrix:new Float64Array(l*u),width:l,height:u,positionOfVariable:new Int32Array(p),variableAtPosition:new Int32Array(p)};for(let t=0;t<p;t++)h.positionOfVariable[t]=t,h.variableAtPosition[t]=t;const d="objective"in t;for(let i=1;i<l;i++)for(const[r,a]of c("A variable",n[i-1][1])){d&&r===t.objective&&(0,s.update)(h,0,i,e*a);const n=o.get(r);null!=n&&(Number.isFinite(n.upper)?((0,s.update)(h,n.row,i,a),Number.isFinite(n.lower)&&(0,s.update)(h,n.row+1,i,-a)):Number.isFinite(n.lower)&&(0,s.update)(h,n.row,i,-a))}for(const t of o.values())Number.isFinite(t.upper)?((0,s.update)(h,t.row,0,t.upper),Number.isFinite(t.lower)&&(0,s.update)(h,t.row+1,0,-t.lower)):Number.isFinite(t.lower)&&(0,s.update)(h,t.row,0,-t.lower);for(let t=0;t<i.length;t++){const e=a+t;(0,s.update)(h,e,0,1),(0,s.update)(h,e,i[t],1)}return{tableau:h,sign:e,variables:n,integers:r}};const h=(t,e,n)=>{const i=(0,s.index)(t,e,n),r=t.variableAtPosition[t.width+e],o=t.variableAtPosition[n];t.variableAtPosition[t.width+e]=o,t.variableAtPosition[n]=r,t.positionOfVariable[r]=n,t.positionOfVariable[o]=t.width+e;const a=[];for(let n=0;n<t.width;n++){const r=(0,s.index)(t,e,n);Math.abs(r)>1e-16?((0,s.update)(t,e,n,r/i),a.push(n)):(0,s.update)(t,e,n,0)}(0,s.update)(t,e,n,1/i);for(let r=0;r<t.height;r++){if(r===e)continue;const o=(0,s.index)(t,r,n);if(Math.abs(o)>1e-16){for(let n=0;n<a.length;n++){const i=a[n];(0,s.update)(t,r,i,(0,s.index)(t,r,i)-o*(0,s.index)(t,e,i))}(0,s.update)(t,r,n,-o/i)}}},d=(t,e,n,i)=>{t.push([e.variableAtPosition[e.width+n],e.variableAtPosition[i]]);for(let e=6;e<=Math.floor(t.length/2);e++){let n=!0;for(let i=0;i<e;i++){const r=t.length-1-i,[o,a]=t[r],[l,s]=t[r-e];if(o!==l||a!==s){n=!1;break}}if(n)return!0}return!1},b=(t,e)=>{const n=Math.round(1/e);return Math.round((t+Number.EPSILON)*n)/n},w=(t,e)=>{const n=[],i=e.precision;for(let r=0;r<e.maxPivots;r++){let r=0,o=i;for(let e=1;e<t.width;e++){const n=(0,s.index)(t,0,e);n>o&&(o=n,r=e)}if(0===r)return["optimal",b((0,s.index)(t,0,0),i)];let a=0,l=1/0;for(let e=1;e<t.height;e++){const n=(0,s.index)(t,e,r);if(n<=i)continue;const o=(0,s.index)(t,e,0)/n;if(o<l){if(a=e,l<=i)break;l=o}}if(0===a)return["unbounded",r];if(e.checkCycles&&d(n,t,a,r))return["cycled",NaN];h(t,a,r)}return["cycled",NaN]},g=(t,e)=>{const n=[],i=e.precision;for(let r=0;r<e.maxPivots;r++){let r=0,o=-i;for(let e=1;e<t.height;e++){const n=(0,s.index)(t,e,0);n<o&&(o=n,r=e)}if(0===r)return w(t,e);let a=0,l=-1/0;for(let e=1;e<t.width;e++){const n=(0,s.index)(t,r,e);if(n<-i){const i=-(0,s.index)(t,0,e)/n;i>l&&(l=i,a=e)}}if(0===a)return["infeasible",NaN];if(e.checkCycles&&d(n,t,r,a))return["cycled",NaN];h(t,r,a)}return["cycled",NaN]},m=(t,e,n,i,r)=>{if("optimal"===e||"timedout"===e&&!Number.isNaN(n)){const o=[];for(let e=0;e<t.variables.length;e++){const n=t.variables[e][0],a=t.tableau.positionOfVariable[e+1]-t.tableau.width,l=a>=0?(0,s.index)(t.tableau,a,0):0;l>i?o.push([n,b(l,i)]):r&&o.push([n,0])}return{status:e,result:-t.sign*n,variables:o}}if("unbounded"===e){const e=t.tableau.variableAtPosition[n]-1;return{status:"unbounded",result:t.sign*(1/0),variables:0<=e&&e<t.variables.length?[[t.variables[e][0],1/0]]:[]}}return{status:e,result:NaN,variables:[]}},y=(t,e)=>({matrix:new Float64Array(t),positionOfVariable:new Int32Array(e),variableAtPosition:new Int32Array(e)}),v=(t,{matrix:e,positionOfVariable:n,variableAtPosition:i},r)=>{e.set(t.matrix);for(let n=0;n<r.length;n++){const[i,o,a]=r[n],l=(t.height+n)*t.width,s=t.positionOfVariable[o];if(s<t.width)e[l]=i*a,e.fill(0,l+1,l+t.width),e[l+s]=i;else{const n=(s-t.width)*t.width;e[l]=i*(a-e[n]);for(let r=1;r<t.width;r++)e[l+r]=-i*e[n+r]}}n.set(t.positionOfVariable),i.set(t.variableAtPosition);const o=t.width+t.height+r.length;for(let e=t.width+t.height;e<o;e++)n[e]=e,i[e]=e;return{matrix:e.subarray(0,t.matrix.length+t.width*r.length),width:t.width,height:t.height+r.length,positionOfVariable:n.subarray(0,o),variableAtPosition:i.subarray(0,o)}},x=(t,e)=>{let n=0,i=0,r=0;for(let o=0;o<e.length;o++){const a=e[o],l=t.positionOfVariable[a]-t.width;if(l<0)continue;const u=(0,s.index)(t,l,0),p=Math.abs(u-Math.round(u));p>n&&(n=p,i=a,r=u)}return[i,r,n]};s.backupDefaultOptions=Object.freeze({precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1}),s.defaultOptions={...s.backupDefaultOptions};s.solve=(t,e)=>{if(null==t)throw"model was null or undefined.";const n=(0,s.tableauModel)(t),i={...s.backupDefaultOptions,...s.defaultOptions,...e},[r,o]=g(n.tableau,i);return 0===n.integers.length?m(n,r,o,i.precision,i.includeZeroVariables):"optimal"===r?((t,e,n)=>{const[i,r,o]=x(t.tableau,t.integers);if(o<=n.precision)return m(t,"optimal",e,n.precision,n.includeZeroVariables);const a=new p.default(((t,e)=>t[0]-e[0]));a.push([e,[[-1,i,Math.ceil(r)]]]),a.push([e,[[1,i,Math.floor(r)]]]);const l=2*t.integers.length,s=t.tableau.matrix.length+l*t.tableau.width,u=t.tableau.positionOfVariable.length+l,c=y(s,u),f=y(s,u);let h=!0;const d=e*(1-t.sign*n.tolerance),b=n.timeout+Date.now();let w=Date.now()>=b,N=!1,A=1/0,O=t.tableau,M=0;for(;M<n.maxIterations&&!a.empty()&&A>=d&&!w;){const[e,i]=a.pop();if(e>A)break;const r=v(t.tableau,h?c:f,i),[o,l]=g(r,n);if("optimal"===o&&l<A){const[e,o,s]=x(r,t.integers);if(s<=n.precision)N=!0,A=l,O=r,h=!h;else{const t=[],n=[];for(let r=0;r<i.length;r++){const o=i[r],[a,l]=o;l===e?a<0?n.push(o):t.push(o):(t.push(o),n.push(o))}n.push([1,e,Math.floor(o)]),t.push([-1,e,Math.ceil(o)]),a.push([l,t]),a.push([l,n])}}w=Date.now()>=b,M++}const P=!a.empty()&&A<d&&(w||M===n.maxIterations);return m({...t,tableau:O},P?"timedout":N?"optimal":"infeasible",N?A:NaN,n.precision,n.includeZeroVariables)})(n,o,i):m(n,r,o,i.precision,i.includeZeroVariables)},onmessage=t=>{const e=t.data;r(e)&&postMessage(l((t=>(0,s.solve)(t,void 0)),e))}})();
//# sourceMappingURL=Worker.5b01e5fb.js.map

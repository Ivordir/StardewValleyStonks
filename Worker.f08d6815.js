(()=>{function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=e.parcelRequire94c2;function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)}null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){r[t]=e},e.parcelRequire94c2=i),i.register("l9uIb",(function(t,e){(function(){var e,n,r,i,o,s,a,l,u,p,c,h,f,d,b,g;r=Math.floor,p=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},u=function(t,e,i,o,s){var a;if(null==i&&(i=0),null==s&&(s=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)s(e,t[a=r((i+o)/2)])<0?o=a:i=a+1;return[].splice.apply(t,[i,i-i].concat(e)),e},s=function(t,e,r){return null==r&&(r=n),t.push(e),d(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,b(t,0,e)):i=r,i},l=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,b(t,0,r),i},a=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(e=(i=[t[0],e])[0],t[0]=i[1],b(t,0,r)),e},i=function(t,e){var i,o,s,a,l,u;for(null==e&&(e=n),a=function(){u=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}.apply(this).reverse(),l=[],o=0,s=a.length;o<s;o++)i=a[o],l.push(b(t,i,e));return l},f=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return d(t,0,i,r),b(t,i,r)},c=function(t,e,r){var o,s,l,u,p;if(null==r&&(r=n),!(s=t.slice(0,e)).length)return s;for(i(s,r),l=0,u=(p=t.slice(e)).length;l<u;l++)o=p[l],a(s,o,r);return s.sort(r).reverse()},h=function(t,e,r){var s,a,l,c,h,f,d,b,g;if(null==r&&(r=n),10*e<=t.length){if(!(l=t.slice(0,e).sort(r)).length)return l;for(a=l[l.length-1],c=0,f=(d=t.slice(e)).length;c<f;c++)r(s=d[c],a)<0&&(u(l,s,0,null,r),l.pop(),a=l[l.length-1]);return l}for(i(t,r),g=[],h=0,b=p(e,t.length);0<=b?h<b:h>b;0<=b?++h:--h)g.push(o(t,r));return g},d=function(t,e,r,i){var o,s,a;for(null==i&&(i=n),o=t[r];r>e&&i(o,s=t[a=r-1>>1])<0;)t[r]=s,r=a;return t[r]=o},b=function(t,e,r){var i,o,s,a,l;for(null==r&&(r=n),o=t.length,l=e,s=t[e],i=2*e+1;i<o;)(a=i+1)<o&&!(r(t[i],t[a])<0)&&(i=a),t[e]=t[i],i=2*(e=i)+1;return t[e]=s,d(t,l,e,r)},e=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=s,t.pop=o,t.replace=l,t.pushpop=a,t.heapify=i,t.updateItem=f,t.nlargest=c,t.nsmallest=h,t.prototype.push=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return f(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),g=function(){return e},"function"==typeof define&&define.amd?define([],g):t.exports=g()}).call(t.exports)}));class s{static id(t){return s.idMap.has(t)||s.idMap.set(t,++s.count),s.idMap.get(t)}}s.idMap=new WeakMap,s.count=0;Symbol("curried");function a(t,e){return"function"==typeof t?new t(e):new Array(e)}function l(t,e,n){const r=0|e.length,i=a(n,r);for(let n=0;n<=r-1;n++)i[n]=t(e[n]);return i}var u;u=i("l9uIb");const p=(t,e,n)=>t.matrix[e*t.width+n],c=(t,e,n,r)=>{t.matrix[e*t.width+n]=r},h=t=>"function"==typeof t[Symbol.iterator]?t:Object.entries(t),f=t=>!0===t||(!1===t?new Set:t instanceof Set?t:new Set(t)),d=(t,e,n)=>{const r=p(t,e,n),i=t.variableAtPosition[t.width+e],o=t.variableAtPosition[n];t.variableAtPosition[t.width+e]=o,t.variableAtPosition[n]=i,t.positionOfVariable[i]=n,t.positionOfVariable[o]=t.width+e;const s=[];for(let n=0;n<t.width;n++){const i=p(t,e,n);Math.abs(i)>1e-16?(c(t,e,n,i/r),s.push(n)):c(t,e,n,0)}c(t,e,n,1/r);for(let i=0;i<t.height;i++){if(i===e)continue;const o=p(t,i,n);if(Math.abs(o)>1e-16){for(let n=0;n<s.length;n++){const r=s[n];c(t,i,r,p(t,i,r)-o*p(t,e,r))}c(t,i,n,-o/r)}}},b=(t,e,n,r)=>{t.push([e.variableAtPosition[e.width+n],e.variableAtPosition[r]]);for(let e=6;e<=Math.floor(t.length/2);e++){let n=!0;for(let r=0;r<e;r++){const i=t.length-1-r,[o,s]=t[i],[a,l]=t[i-e];if(o!==a||s!==l){n=!1;break}}if(n)return!0}return!1},g=(t,e)=>{const n=Math.round(1/e);return Math.round((t+Number.EPSILON)*n)/n},w=(t,e)=>{const n=[],r=e.precision;for(let i=0;i<e.maxPivots;i++){let i=0,o=r;for(let e=1;e<t.width;e++){const n=p(t,0,e);n>o&&(o=n,i=e)}if(0===i)return["optimal",g(p(t,0,0),r)];let s=0,a=1/0;for(let e=1;e<t.height;e++){const n=p(t,e,i);if(n<=r)continue;const o=p(t,e,0)/n;if(o<a&&(s=e,a=o,o<=r))break}if(0===s)return["unbounded",i];if(e.checkCycles&&b(n,t,s,i))return["cycled",NaN];d(t,s,i)}return["cycled",NaN]},m=(t,e)=>{const n=[],r=e.precision;for(let i=0;i<e.maxPivots;i++){let i=0,o=-r;for(let e=1;e<t.height;e++){const n=p(t,e,0);n<o&&(o=n,i=e)}if(0===i)return w(t,e);let s=0,a=-1/0;for(let e=1;e<t.width;e++){const n=p(t,i,e);if(n<-r){const r=-p(t,0,e)/n;r>a&&(a=r,s=e)}}if(0===s)return["infeasible",NaN];if(e.checkCycles&&b(n,t,i,s))return["cycled",NaN];d(t,i,s)}return["cycled",NaN]},y=(t,e,n,r,i)=>{if("optimal"===e||"timedout"===e&&!Number.isNaN(n)){const o=[];for(let e=0;e<t.variables.length;e++){const n=t.variables[e][0],s=t.tableau.positionOfVariable[e+1]-t.tableau.width,a=s>=0?p(t.tableau,s,0):0;a>r?o.push([n,g(a,r)]):i&&o.push([n,0])}return{status:e,result:-t.sign*n,variables:o}}if("unbounded"===e){const e=t.tableau.variableAtPosition[n]-1;return{status:"unbounded",result:t.sign*(1/0),variables:0<=e&&e<t.variables.length?[[t.variables[e][0],1/0]]:[]}}return{status:e,result:NaN,variables:[]}},v=(t,e)=>({matrix:new Float64Array(t),positionOfVariable:new Int32Array(e),variableAtPosition:new Int32Array(e)}),N=(t,{matrix:e,positionOfVariable:n,variableAtPosition:r},i)=>{e.set(t.matrix);for(let n=0;n<i.length;n++){const[r,o,s]=i[n],a=(t.height+n)*t.width,l=t.positionOfVariable[o];if(l<t.width)e[a]=r*s,e.fill(0,a+1,a+t.width),e[a+l]=r;else{const n=(l-t.width)*t.width;e[a]=r*(s-e[n]);for(let i=1;i<t.width;i++)e[a+i]=-r*e[n+i]}}n.set(t.positionOfVariable),r.set(t.variableAtPosition);const o=t.width+t.height+i.length;for(let e=t.width+t.height;e<o;e++)n[e]=e,r[e]=e;return{matrix:e.subarray(0,t.matrix.length+t.width*i.length),width:t.width,height:t.height+i.length,positionOfVariable:n.subarray(0,o),variableAtPosition:r.subarray(0,o)}},x=(t,e)=>{let n=0,r=0,i=0;for(let o=0;o<e.length;o++){const s=e[o],a=t.positionOfVariable[s]-t.width;if(a<0)continue;const l=p(t,a,0),u=Math.abs(l-Math.round(l));u>n&&(n=u,r=s,i=l)}return[r,i,n]},A={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},M=(e,n)=>{if(null==e)throw"model was null or undefined.";const r=(t=>{const e="maximize"===t.direction||null==t.direction?1:"minimize"===t.direction?-1:0;if(0===e)throw`'${t.direction}' is not a valid optimization direction. Should be 'maximize', 'minimize', or left blank.`;const n=h(t.constraints),r=h(t.variables),i=Array.isArray(r)?r:Array.from(r),o=[],s=[];if(t.integers||t.binaries){const e=f(t.binaries),n=!0===e||f(t.integers);for(let t=1;t<=i.length;t++){const[r]=i[t-1];!0===e||e.has(r)?(o.push(t),s.push(t)):(!0===n||n.has(r))&&s.push(t)}}const a=new Map;for(const[t,e]of n){const n=a.get(t)??{row:NaN,lower:-1/0,upper:1/0};n.lower=Math.max(n.lower,e.equal??e.min??-1/0),n.upper=Math.min(n.upper,e.equal??e.max??1/0),a.has(t)||a.set(t,n)}let l=1;for(const t of a.values())t.row=l,l+=(Number.isFinite(t.lower)?1:0)+(Number.isFinite(t.upper)?1:0);const u=i.length+1,p=l+o.length,d=u+p,b={matrix:new Float64Array(u*p),width:u,height:p,positionOfVariable:new Int32Array(d),variableAtPosition:new Int32Array(d)};for(let t=0;t<d;t++)b.positionOfVariable[t]=t,b.variableAtPosition[t]=t;const g="objective"in t;for(let n=1;n<u;n++)for(const[r,o]of h(i[n-1][1])){g&&r===t.objective&&c(b,0,n,e*o);const i=a.get(r);null!=i&&(Number.isFinite(i.upper)?(c(b,i.row,n,o),Number.isFinite(i.lower)&&c(b,i.row+1,n,-o)):Number.isFinite(i.lower)&&c(b,i.row,n,-o))}for(const t of a.values())Number.isFinite(t.upper)?(c(b,t.row,0,t.upper),Number.isFinite(t.lower)&&c(b,t.row+1,0,-t.lower)):Number.isFinite(t.lower)&&c(b,t.row,0,-t.lower);for(let t=0;t<o.length;t++){const e=l+t;c(b,e,0,1),c(b,e,o[t],1)}return{tableau:b,sign:e,variables:i,integers:s}})(e),i={...A,...n},[o,s]=m(r.tableau,i);return 0===r.integers.length?y(r,o,s,i.precision,i.includeZeroVariables):"optimal"===o?((e,n,r)=>{const[i,o,s]=x(e.tableau,e.integers);if(s<=r.precision)return y(e,"optimal",n,r.precision,r.includeZeroVariables);const a=new(t(u))(((t,e)=>t[0]-e[0]));a.push([n,[[-1,i,Math.ceil(o)]]]),a.push([n,[[1,i,Math.floor(o)]]]);const l=2*e.integers.length,p=e.tableau.matrix.length+l*e.tableau.width,c=e.tableau.positionOfVariable.length+l,h=v(p,c),f=v(p,c);let d=!0;const b=n*(1-e.sign*r.tolerance),g=r.timeout+Date.now();let w=Date.now()>=g,A=!1,M=1/0,O=e.tableau,V=0;for(;V<r.maxIterations&&!a.empty()&&M>=b&&!w;){const[t,n]=a.pop();if(t>M)break;const i=N(e.tableau,d?h:f,n),[o,s]=m(i,r);if("optimal"===o&&s<M){const[t,o,l]=x(i,e.integers);if(l<=r.precision)A=!0,M=s,O=i,d=!d;else{const e=[],r=[];for(let i=0;i<n.length;i++){const o=n[i],[s,a]=o;a===t?s<0?r.push(o):e.push(o):(e.push(o),r.push(o))}r.push([1,t,Math.floor(o)]),e.push([-1,t,Math.ceil(o)]),a.push([s,e]),a.push([s,r])}}w=Date.now()>=g,V++}const P=(w||V>=r.maxIterations)&&!a.empty()&&M>=b?"timedout":A?"optimal":"infeasible";return y({...e,tableau:O},P,A?M:NaN,r.precision,r.includeZeroVariables)})(r,s,i):y(r,o,s,i.precision,i.includeZeroVariables)};onmessage=t=>{const e=t.data;o(e)&&postMessage(l((t=>M(t,void 0)),e))}})();
//# sourceMappingURL=Worker.f08d6815.js.map
